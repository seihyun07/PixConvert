<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixConvert | Secure Image & PDF Converter</title>
    <meta name="description" content="Convert JPG, PNG, WEBP to PDF or other image formats safely in your browser.">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --text-main: #111827;
            --text-sub: #6b7280;
            --bg-color: #f9fafb;
            --border-color: #d1d5db;
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#e5e7eb 0.8px, transparent 0.8px);
            background-size: 24px 24px;
            color: var(--text-main);
            padding: 40px 20px;
        }

        .container { max-width: 850px; margin: 0 auto; }

        header { text-align: center; margin-bottom: 40px; }
        header h1 { font-size: 3rem; font-weight: 800; margin-bottom: 10px; }
        header p { color: var(--text-sub); font-size: 1.1rem; }

        .converter-container {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 32px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }

        /* Drop Zone */
        .drop-zone {
            border: 2px dashed var(--border-color);
            border-radius: 24px;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.3s;
            background: #fafafa;
            margin-bottom: 30px;
        }
        .drop-zone:hover { border-color: var(--primary); background: #f5f3ff; }

        #file-display {
            width: 100%; display: none; padding: 15px;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px;
        }
        .file-card {
            background: white; border: 1px solid var(--border-color);
            border-radius: 12px; padding: 12px; font-size: 13px;
        }
        .file-preview { width: 100%; height: 100px; object-fit: cover; border-radius: 8px; margin-bottom: 8px; }

        /* Controls */
        .controls { 
            border-top: 1px solid #eee; 
            padding-top: 25px; 
            display: block; 
        }
        .format-selector { margin-bottom: 20px; }
        .label { font-weight: 700; display: block; margin-bottom: 12px; font-size: 14px; text-transform: uppercase; color: var(--text-sub); }
        .btn-group { display: flex; gap: 8px; flex-wrap: wrap; }
        .btn-format {
            flex: 1; min-width: 80px; padding: 12px; border: 1px solid var(--border-color);
            background: white; border-radius: 12px; cursor: pointer; font-weight: 600; transition: 0.2s;
        }
        .btn-format.active { background: var(--primary); color: white; border-color: var(--primary); }

        .btn-convert {
            width: 100%; padding: 16px; background: var(--primary); color: white;
            border: none; border-radius: 14px; font-size: 17px; font-weight: 700;
            cursor: pointer; opacity: 0.5; pointer-events: none;
        }
        .btn-convert.ready { opacity: 1; pointer-events: auto; }
        .btn-convert:hover { background: var(--primary-hover); }

        #result-area { margin-top: 20px; text-align: center; display: none; }
        .download-link {
            display: inline-block; color: var(--primary); font-weight: 700; 
            text-decoration: none; padding: 12px 24px; border: 2px solid var(--primary); border-radius: 10px;
        }

        /* --- FAQ SECTION REVISED --- */
        .faq-section { 
            margin-top: 150px; /* 스크롤을 충분히 내려야 보이도록 상단 여백 확보 */
            margin-bottom: 80px;
        }

        .faq-section h2 { 
            text-align: center; 
            font-size: 2.2rem; 
            font-weight: 800;
            margin-bottom: 50px; /* 제목과 첫 질문 사이의 줄 간격 띄움 */
            color: var(--text-main);
        }

        .faq-grid {
            display: flex;
            flex-direction: column;
            gap: 12px; /* 질문 상자들 사이의 간격 */
        }

        .faq-item { 
            background: white; 
            border: 1px solid var(--border-color); 
            border-radius: 16px; 
            overflow: hidden;
            transition: all 0.2s ease;
        }

        .faq-question { 
            width: 100%; 
            padding: 20px 24px; 
            text-align: left; 
            background: none; 
            border: none; 
            font-size: 1.05rem;
            font-weight: 700; 
            cursor: pointer; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            color: var(--text-main);
        }

        .faq-answer { 
            padding: 0 24px; 
            max-height: 0; 
            overflow: hidden; 
            transition: all 0.3s ease-in-out; 
            color: var(--text-sub); 
            font-size: 0.95rem; 
            line-height: 1.6;
        }

        .faq-item.active .faq-answer { 
            padding-bottom: 20px; 
            max-height: 200px; 
        }
        
        .faq-item.active {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.05);
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>PixConvert</h1>
        <p>Convert images to JPG, PNG, WEBP, or PDF instantly for free.</p>
    </header>

    <main class="converter-container">
        <div class="drop-zone" id="drop-zone">
            <input type="file" id="file-input" hidden accept="image/*">
            <div id="upload-placeholder" style="text-align: center;">
                <p style="font-weight: 700; font-size: 1.1rem;">Click or Drag Image Here</p>
                <p style="color: var(--text-sub); font-size: 0.9rem;">Supports JPG, PNG, WEBP, PDF</p>
            </div>
            <div id="file-display"></div>
        </div>

        <div class="controls">
            <div class="format-selector">
                <span class="label">Select Output Format</span>
                <div class="btn-group">
                    <button class="btn-format active" data-fmt="jpeg">JPG</button>
                    <button class="btn-format" data-fmt="png">PNG</button>
                    <button class="btn-format" data-fmt="webp">WEBP</button>
                    <button class="btn-format" data-fmt="pdf" style="border-color: #ef4444; color: #ef4444;">PDF</button>
                </div>
            </div>
            <button class="btn-convert" id="convert-btn">Convert Now</button>
            
            <div id="result-area">
                <a id="download-link" class="download-link">Download Converted File</a>
            </div>
        </div>
    </main>

    <section class="faq-section">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-grid">
            <div class="faq-item">
                <button class="faq-question">Is PixConvert free to use? <span>+</span></button>
                <div class="faq-answer">Yes, PixConvert is 100% free with no hidden costs or registration required. You can convert as many images as you like.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Are my photos safe? <span>+</span></button>
                <div class="faq-answer">Absolutely. Unlike other sites, we don't upload your images to any server. All processing happens locally in your browser, ensuring maximum privacy.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Which formats are supported? <span>+</span></button>
                <div class="faq-answer">We currently support converting JPG, PNG, and WEBP formats. You can switch between them instantly.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Does conversion reduce quality? <span>+</span></button>
                <div class="faq-answer">We maintain high-quality standards. When converting to JPG, we use a 90% quality setting to balance file size and visual clarity.</div>
            </div>
        </div>
    </section>
</div>

<canvas id="hidden-canvas" style="display:none;"></canvas>

<script>
    const { jsPDF } = window.jspdf;
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const placeholder = document.getElementById('upload-placeholder');
    const fileDisplay = document.getElementById('file-display');
    const convertBtn = document.getElementById('convert-btn');
    const downloadLink = document.getElementById('download-link');
    const resultArea = document.getElementById('result-area');
    const canvas = document.getElementById('hidden-canvas');
    const ctx = canvas.getContext('2d');

    let selectedFile = null;
    let targetFormat = 'jpeg';

    dropZone.onclick = () => fileInput.click();
    fileInput.onchange = (e) => handleFile(e.target.files[0]);

    function handleFile(file) {
        if (!file || !file.type.startsWith('image/')) return;
        selectedFile = file;
        placeholder.style.display = 'none';
        fileDisplay.style.display = 'grid';
        convertBtn.classList.add('ready');
        resultArea.style.display = 'none';

        const reader = new FileReader();
        reader.onload = (e) => {
            fileDisplay.innerHTML = `
                <div class="file-card">
                    <img src="${e.target.result}" class="file-preview">
                    <div style="font-weight:700; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${file.name}</div>
                </div>
            `;
        };
        reader.readAsDataURL(file);
    }

    document.querySelectorAll('.btn-format').forEach(btn => {
        btn.onclick = (e) => {
            e.stopPropagation();
            document.querySelectorAll('.btn-format').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            targetFormat = btn.dataset.fmt;
        };
    });

    convertBtn.onclick = () => {
        if (!selectedFile) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
                if (targetFormat === 'pdf') {
                    const pdf = new jsPDF({
                        orientation: img.width > img.height ? 'l' : 'p',
                        unit: 'px',
                        format: [img.width, img.height]
                    });
                    pdf.addImage(img, 'JPEG', 0, 0, img.width, img.height);
                    const blob = pdf.output('blob');
                    const url = URL.createObjectURL(blob);
                    finishConversion(url, 'pdf');
                } else {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    const dataUrl = canvas.toDataURL(`image/${targetFormat}`, 0.9);
                    finishConversion(dataUrl, targetFormat === 'jpeg' ? 'jpg' : targetFormat);
                }
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(selectedFile);
    };

    function finishConversion(url, ext) {
        downloadLink.href = url;
        downloadLink.download = `pixconvert-${Date.now()}.${ext}`;
        resultArea.style.display = 'block';
        resultArea.scrollIntoView({ behavior: 'smooth' });
    }

    // FAQ Accordion logic
    document.querySelectorAll('.faq-question').forEach(q => {
        q.onclick = () => {
            const item = q.parentElement;
            const isActive = item.classList.contains('active');
            
            // 다른 질문 닫기 (선택사항)
            document.querySelectorAll('.faq-item').forEach(i => i.classList.remove('active'));
            document.querySelectorAll('.faq-question span').forEach(s => s.innerText = '+');

            if (!isActive) {
                item.classList.add('active');
                q.querySelector('span').innerText = '-';
            }
        };
    });
</script>

</body>
</html>
